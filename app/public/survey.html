<!DOCTYPE html>
<html>
<head>
  <title>Friend Finder</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="reset.css">
  <link href="https://fonts.googleapis.com/css?family=Arima+Madurai|Dosis:500|Kanit" rel="stylesheet">
  <link href="animate.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container-fluid bg-pic-survey">
    <div class='layer-survey'>
        <div class="container survey-container">
            <div class="row">
                <div class="col-md-6" style="text-align: center;">
                    <h2 id='survey-header'>Take The Survey!</h2>
                    <h4>Answer the questions below to find your match!</h4>
                    <!-- <h4>Choose between 1 (hate it) and 5 (absolutely love it!)</h4> -->
                    <br/>
                    <form>
					    <input type="name" class="form-control inputName" id='userName' placeholder="Enter Your Name">
	                    <select class="form-control form-control-lg form-inline" id="gender">
						  <option>Gender</option>
						  <option value='male'>Male</option>
						  <option value='female'>Female</option>
						</select>
	                    <label class="question">How do you feel about ice cream?</label>
	                    <select class="form-control form-control-lg form-inline" id="question-1">
						  <option>Choose One</option>
						  <option value='1'>1 (Hate It)</option>
						  <option value='2'>2</option>
						  <option value='3'>3</option>
						  <option value='4'>4</option>
						  <option value='5'>5 (Love It)</option>
						</select>
					
                      <!--   <form class="form-inline">
                            <div class="radio">
                                <label>
                                    <input id="input" type="radio" value="1" name="optradio">1</label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input id="input" type="radio" value="2" name="optradio">2</label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input id="input" type="radio" value="3" name="optradio">3</label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input id="input" type="radio" value="4" name="optradio">4</label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input id="input" type="radio" value="5" name="optradio">5</label>
                            </div>
                        </form> -->
                        <br/>
                        <label class="question">Do you like to go to the movies?</label>
                        <select class="form-control form-control-lg form-inline" id="question-2">
						  <option>Choose One</option>
						  <option value='1'>1 (Hate It)</option>
						  <option value='2'>2</option>
						  <option value='3'>3</option>
						  <option value='4'>4</option>
						  <option value='5'>5 (Love It)</option>
						</select>
                        <br/>
                        <label class="question">How do you feel about dogs?</label>
                        <select class="form-control form-control-lg form-inline" id="question-3">
						  <option>Choose One</option>
						  <option value='1'>1 (Hate It)</option>
						  <option value='2'>2</option>
						  <option value='3'>3</option>
						  <option value='4'>4</option>
						  <option value='5'>5 (Love It)</option>
						</select>
                        <br/>
                        <label class="question">Are you into fashion?</label>
                        <select class="form-control form-control-lg form-inline" id="question-4">
						  <option>Choose One</option>
						  <option value='1'>1 (Hate It)</option>
						  <option value='2'>2</option>
						  <option value='3'>3</option>
						  <option value='4'>4</option>
						  <option value='5'>5 (Love It)</option>
						</select>
                        <br/>
                        <label class="question">How do you feel about Beyonce?</label>
                        <select class="form-control form-control-lg form-inline" id="question-5">
						  <option>Choose One</option>
						  <option value='1'>1 (Hate It)</option>
						  <option value='2'>2</option>
						  <option value='3'>3</option>
						  <option value='4'>4</option>
						  <option value='5'>5 (Love It)</option>
						</select>
                        <br/>
                        <label class="question">How do you feel about exercising?</label>
                        <select class="form-control form-control-lg form-inline" id="question-6">
						  <option>Choose One</option>
						  <option value='1'>1 (Hate It)</option>
						  <option value='2'>2</option>
						  <option value='3'>3</option>
						  <option value='4'>4</option>
						  <option value='5'>5 (Love It)</option>
						</select>
                    </form>
                    <!-- <br/> -->
                    <div>
	                    <button class='btn btn-primary' id='submit' data-toggle='modal' data-target='#matchModal'>Find Forever</button>
                    </div>
                    <br/>
                    <br/>
                    <br/>
                    <!-- Modal -->
                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                    <h1 class="modal-title" id="exampleModal">Here Is Your Match!</h1>
                                    <h2 id='modal-subtitle'></h2>
                                </div>
                                <div class="modal-body">
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary">Save changes</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



</body>
</html>

<script type='text/javascript'>

	$('#submit').on('click', function(event){
		event.preventDefault();
		var q1 = parseFloat($('#question-1').val());
		var q2 = parseFloat($('#question-2').val());
		var q3 = parseFloat($('#question-3').val());
		var q4 = parseFloat($('#question-4').val());
		var q5 = parseFloat($('#question-5').val());
		var q6 = parseFloat($('#question-6').val());
		var userName = $('#userName').val();
		var userGender = $('#gender').val();
		var userScore = {
			name: userName,
			gender: userGender,
			scores: [q1, q2, q3, q4, q5, q6]
		};
		function checkSubmission(score){
			return score > 0;
		}
		console.log(userName);
		console.log(userGender);
		console.log(userScore.scores.every(checkSubmission))
		if (userName === ''|| userGender === 'Gender'){
			console.log('you missed something');
		}else if (!userScore.scores.every(checkSubmission)){
			console.log('you missed one');
		}else{
			console.log(userScore);

			$.post('/api/friends', userScore, function(data){
					if(data){
						alert('Please wait while we find your match! :)')
					}
				
				}).then(function(data){
					$('.modal-body').html('');
					console.log(data);
					var matchPic = `<img class="modal-img" src='${data.photo}'>`;
					var matchName = data.name;
					$('.modal-body').append(matchPic);
					$('#modal-subtitle').html(matchName);
					$('#myModal').modal('show');

				});
		}

	});
</script>